组件开发阶段详细说明
================

4.1 组件规划
----------
4.1.1 组件分类：
- 基础组件
- 业务组件
- 布局组件
- 功能组件

4.1.2 组件文档规范：
- 组件描述
- Props 说明
- 使用示例
- 注意事项

4.1.3 开发优先级：
- 核心组件
- 通用组件
- 特殊组件
- 装饰组件

4.2 基础组件开发
-------------
4.2.1 导航组件：
- 顶部导航
- 侧边导航
- 面包屑
- 标签页

4.2.2 页面组件：
- 页头组件
- 页脚组件
- 布局组件
- 容器组件

4.2.3 表单组件：
- 输入框
- 选择器
- 日期选择
- 表单验证
- 密码输入组件：
  * 密码强度实时检查
  * 显示/隐藏密码切换
  * 强度指示器（颜色进度条）
  * 建议提示信息

4.2.4 认证组件：
- 登录表单：
  * 邮箱/密码验证
  * 记住登录选项
  * 错误信息展示
  * 自动续期机制
- 注册表单：
  * 完整性验证
  * 密码强度检查
  * 实时反馈
- 会话管理：
  * Token 存储
  * 过期检查
  * 自动续期（剩余10天）
  * 状态同步
  4.2.4 认证组件详细说明：

a. 登录组件：
    文件位置：src/pages/Login.tsx

    功能特点：
    1. 表单验证
    - 邮箱格式验证
    - 密码长度验证
    - 实时错误提示
    - 表单完整性检查

    2. 登录功能
    - 邮箱/密码认证
    - 记住登录（30天）
    - 自动续期（剩余10天时）
    - 登录状态持久化
    - Token 管理

    3. 用户体验
    - 加载状态显示
    - 错误信息展示
    - 密码显示切换
    - 表单自动填充
    - 记住登录选项

    4. 安全特性
    - Token 加密存储
    - 会话状态管理
    - 自动登出机制
    - XSS 防护

    相关文件：
    - src/store/slices/authSlice.ts (认证状态管理)
    - src/components/auth/PasswordInput.tsx (密码输入组件)
    - src/utils/auth.ts (认证工具函数)
    - src/types/auth.ts (认证相关类型)

    注意事项：
    1. Token 安全存储
    2. 密码加密传输
    3. 会话状态同步
    4. 自动续期处理
    5. 错误处理机制

    后续优化方向：
    1. 添加社交媒体登录
    2. 实现双因素认证
    3. 添加登录日志
    4. 异地登录提醒
    5. 登录行为分析

    b. 注册组件：
    文件位置：src/pages/Register.tsx

    功能特点：
    1. 表单验证
    - 邮箱唯一性检查
    - 密码强度验证
    - 确认密码匹配
    - 用户协议确认

    2. 密码强度检查
    - 实时强度评估
    - 可视化强度指示
    - 密码要求提示
    - 常见密码检查

    3. 注册流程
    - 步骤引导
    - 验证码发送
    - 邮箱验证
    - 注册成功处理

    4. 用户体验
    - 表单状态保持
    - 进度显示
    - 友好提示
    - 错误处理

    相关文件：
    - src/components/auth/PasswordStrength.tsx (密码强度组件)
    - src/components/auth/RegisterForm.tsx (注册表单)
    - src/utils/validation.ts (验证工具)
    - src/api/auth.ts (认证API)

    注意事项：
    1. 密码强度要求
    2. 用户数据验证
    3. 注册流程完整性
    4. 安全性考虑

    后续优化方向：
    1. 添加手机号注册
    2. 支持更多验证方式
    3. 优化注册流程
    4. 添加注册数据分析
    5. 实现邀请注册机制

4.3 业务组件开发
-------------
4.3.1 商品相关：
- 商品卡片
    a. 商品卡片组件：
        文件位置：src/components/product/ProductCard.tsx

        功能特点：
        1. 商品信息展示
        - 商品图片（支持懒加载）
            * 当前使用在线随机图片服务
            * 计划后续迁移至本地优化图片
            * 需要准备商品分类对应的本地图片资源
        - 商品名称
        - 价格显示
            * 当前价格（HK$）
            * 原价（带删除线）
        - 评分信息
            * 星级评分（1-5星）
            * 评论数量
        - 库存状态显示
            * 已售罄（红色背景）
            * 库存紧张（黄色背景，少于10件）

        2. 交互功能
        - 图片悬停效果（透明度变化）
        - 多图片切换功能（已实现）
            * 左右切换按钮
            * 底部指示器
            * 平滑过渡效果
        - 快速加入购物车（已实现）
            * 悬停显示按钮
            * 添加成功提示
        - 收藏功能（已实现）
            * 切换收藏状态
            * 状态同步显示
            * 操作反馈提示
        - 点击跳转到商品详情页
        - 链接式导航（使用 React Router）

        3. 样式特点
        - 响应式卡片布局
        - 图片固定比例（1:1）
        - 价格突出显示
        - 评分星级可视化
        - 标签样式优化
            * 不同类型不同颜色
            * 半透明背景
            * 圆角设计

        相关文件：
        - src/types/product.ts (Product 类型定义)
        - src/types/cart.ts (购物车类型定义)
        - src/types/favorite.ts (收藏类型定义)
        - src/pages/Products.tsx (卡片列表集成)
        - src/pages/Favorites.tsx (收藏列表页面)
        - src/mocks/products.ts (模拟数据)
        - src/store/slices/cartSlice.ts (购物车状态管理)
        - src/store/slices/favoriteSlice.ts (收藏状态管理)
        - src/services/ToastService.ts (提示服务)

        注意事项：
        1. 图片使用 lazy loading 优化加载性能
        2. 价格格式化统一处理
        3. 评分显示保留一位小数
        4. 确保移动端适配
        5. 图片资源待优化事项：
          - 准备分类对应的本地商品图片
          - 统一图片尺寸（建议 800x800）
          - 优化图片质量和大小
          - 按产品分类组织图片目录

        后续优化方向：
        1. 图片资源本地化
        2. 图片预加载优化
        3. 添加商品对比功能
        4. 优化移动端交互
        5. 添加分享功能
        6. 支持更多商品信息展示

- 商品列表
    b. 商品列表组件：
        文件位置：src/pages/Products.tsx

        功能特点：
        1. 列表布局
        - 支持 2/3/4 列布局切换
        - 响应式网格布局
        - 自适应商品卡片大小
        - 列表间距自动调整

        2. 数据处理
        - 分页加载（每页 8/9/12 个商品）
        - 商品筛选
            * 价格范围筛选
            * 分类筛选
        - 商品排序
            * 最新
            * 价格从低到高
            * 价格从高到低
            * 评分最高

        3. 加载状态
        - 商品加载动画
        - 局部更新（仅刷新商品列表）
        - 错误状态处理
        - 空状态展示

        4. 性能优化
        - 防抖处理
        - 懒加载图片
        - 虚拟滚动（待实现）
        - 状态缓存

        相关文件：
        - src/components/product/ProductCard.tsx (商品卡片)
        - src/components/product/ProductFilters.tsx (筛选组件)
        - src/components/product/ProductLayoutSwitch.tsx (布局切换)
        - src/components/common/Pagination.tsx (分页组件)
        - src/mocks/products.ts (模拟数据)

        注意事项：
        1. 布局切换时保持筛选状态
        2. 筛选时重置分页
        3. 保持页面滚动位置
        4. 优化移动端体验

        后续优化方向：
        1. 添加列表视图模式
        2. 支持拖拽排序
        3. 添加商品对比功能
        4. 支持批量操作
        5. 添加商品快速预览
- 商品详情
+ 商品详情组件：
+     文件位置：src/pages/ProductDetail.tsx
+ 
+     功能特点：
+     1. 商品信息展示
+     - 商品图片展示
+         * 大图预览
+         * 缩略图列表
+         * 图片放大功能
+     - 基本信息
+         * 商品名称
+         * 价格信息（当前价/原价）
+         * 库存状态
+         * 评分和评论数
+         * 商品标签
+     - 规格选择
+         * 颜色选择
+         * 尺码选择
+         * 数量调整
+     - 详细信息
+         * 商品描述
+         * 规格参数
+         * 商品特点
+ 
+     2. 交互功能
+     - 图片浏览
+         * 左右切换
+         * 点击放大
+         * 缩略图预览
+     - 规格选择
+         * 多规格组合
+         * 库存联动
+         * 价格联动
+     - 购买功能
+         * 加入购物车
+         * 立即购买
+         * 收藏商品
+ 
+     3. 页面布局
+     - 左侧图片区
+         * 主图显示
+         * 缩略图列表
+     - 右侧信息区
+         * 基本信息
+         * 规格选择
+         * 购买按钮
+     - 下方详情区
+         * 选项卡切换
+         * 描述信息
+         * 规格参数
+         * 评价信息
+ 
+     相关文件：
+     - src/components/product/ProductGallery.tsx (商品图片展示)
+     - src/components/product/ProductInfo.tsx (商品信息)
+     - src/components/product/ProductSpecs.tsx (规格选择)
+     - src/components/product/ProductTabs.tsx (详情选项卡)
+     - src/hooks/useProductDetail.ts (商品详情数据处理)
+ 
+     注意事项：
+     1. 规格选择逻辑完整性
+     2. 库存状态实时更新
+     3. 图片加载优化
+     4. 移动端适配
+     5. 页面性能优化
+ 
+     后续优化方向：
+     1. 添加商品视频展示
+     2. 支持 3D 展示
+     3. 添加相关商品推荐
+     4. 优化评论系统
+     5. 添加商品咨询功能
+     6. 社交分享功能

- 商品筛选
    a 价格筛选组件:
        文件位置：src/components/product/ProductFilters.tsx

        功能特点：
        1. 预设价格区间按钮
        - 全部
        - HK$500以下
        - HK$500 - HK$1000
        - HK$1000以上

        2. 自定义价格范围输入
        - 最低价输入框
        - 最高价输入框
        - 输入验证（非负数、最小值不大于最大值）
        - 错误提示功能

        3. 双向滑块价格选择器
        - 价格范围：HK$0 - HK$3000+
        - 步进值：HK$50
        - 实时价格显示
        - 防抖处理（500ms）
        - 视觉反馈
            - 蓝色活动范围显示
            - 白色滑块按钮
            - 滑块阴影效果

        相关文件：
        - src/types/product.ts (ProductFilters 类型定义)
        - src/pages/Products.tsx (筛选器集成)

        注意事项：
        1. 价格筛选状态使用 undefined 表示未选择
        2. 使用 debounce 优化滑块性能
        3. 支持键盘操作和屏幕阅读器
        4. 移动端触摸支持

        后续优化方向：
        1. 添加价格区间统计图表
        2. 支持自定义价格区间保存
        3. 添加价格趋势分析
        4. 优化移动端交互体验 

    b 分类筛选组件:
        文件位置：src/components/product/ProductFilters.tsx

        功能特点：
        1. 主分类功能
        - 显示所有可用主分类
        - 点击切换选中状态
        - 再次点击已选中分类可取消选择
        - 选中时高亮显示
        - 切换主分类时会清除子分类选择

        2. 子分类功能
        - 仅在选中主分类时显示对应子分类
        - 点击切换选中状态
        - 再次点击已选中子分类可取消选择
        - 选中时高亮显示
        - 支持单独取消子分类选择

        3. 分类数据结构
        - 使用常量配置
        - 支持多层分类
        - 每个分类包含 id 和 name
        - 类型安全的分类定义

        相关文件：
        - src/constants/categories.ts (分类数据定义)
        - src/types/product.ts (ProductFilters 类型定义)
        - src/pages/Products.tsx (筛选器集成)

        注意事项：
        1. 分类状态使用 undefined 表示未选择
        2. 主分类和子分类状态同步
        3. 支持键盘操作和屏幕阅读器
        4. 移动端触摸支持

        后续优化方向：
        1. 添加分类商品数量显示
        2. 支持多选分类
        3. 添加分类搜索功能
        4. 支持更深层级的分类

4.3.2 购物相关：
- 购物车组件
- 订单组件
- 支付组件
- 地址组件

4.4 组件测试
----------
4.4.1 单元测试：
- Props 测试
- 事件测试
- 状态测试
- 渲染测试

4.4.2 集成测试：
- 组件交互
- 数据流转
- 异常处理
- 性能测试

4.5 组件优化
----------
4.5.1 性能优化：
- 按需加载
- 缓存处理
- 重渲染控制
- 内存管理

4.5.2 可访问性：
- ARIA 标签
- 键盘导航
- 屏幕阅读
- 颜色对比度

注意事项：
- 组件命名规范
- 代码复用原则
- 性能考虑
- 测试覆盖率 

# 4. 组件开发阶段

## 4.2 商品相关组件

